<h1>gux-visualization-beta</h1>

<h2>Spark chart examples</h2>

<h3>Basic column chart with target line</h3>
<gux-visualization-beta id="spark-column"> </gux-visualization-beta>

<h3>Multi column with interactive legend hover</h3>
<gux-visualization-beta id="spark-multi-column"> </gux-visualization-beta>

<h3>Stacked column</h3>
<gux-visualization-beta id="spark-stacked-column"> </gux-visualization-beta>

<h3>Basic bar chart</h3>
<gux-visualization-beta id="spark-bar"> </gux-visualization-beta>

<h3>Multi bar with interactive legend hover</h3>
<gux-visualization-beta id="spark-multi-bar"> </gux-visualization-beta>

<h2>Default</h2>
<gux-visualization-beta id="chart-1"> </gux-visualization-beta>

<h2>Default Pie</h2>
<gux-visualization-beta id="chart-2"> </gux-visualization-beta>

<h2>Default Donut</h2>
<gux-visualization-beta id="chart-3"> </gux-visualization-beta>

<h2>Column Stacked</h2>
<gux-visualization-beta id="chart-4"> </gux-visualization-beta>

<h2>Column Layered</h2>
<gux-visualization-beta id="chart-5"> </gux-visualization-beta>

<h2>Default Column</h2>
<gux-visualization-beta id="chart-6"> </gux-visualization-beta>

<h2>Line Chart with Tooltips</h2>
<gux-visualization-beta id="chart-7"> </gux-visualization-beta>

<style
  onload="(function() {

    const setChartExample = (visualizationSpec, chartId) => {
      const element = document.querySelector(chartId);
      element.visualizationSpec = visualizationSpec;

    }

    const visualizationSpecLine = {
      '$schema': 'https://vega.github.io/schema/vega-lite/v5.json',
      'data': {'url': 'https://vega.github.io/editor/data/seattle-weather.csv'},
      'mark': {
        'type': 'line',
        'interpolate': 'monotone'
      },
      'encoding': {
        'x': {'timeUnit': 'month', 'field': 'date', 'bandPosition': 0.5},
        'y': {'aggregate': 'mean', 'field': 'temp_max'}
      }
    };

    setChartExample(visualizationSpecLine, '#chart-1');

    const visualizationSpecPie = {
      '$schema': 'https://vega.github.io/schema/vega-lite/v5.json',
      'data': {
        'values': [
          {'category': 'a', 'value': 4},
          {'category': 'b', 'value': 6},
          {'category': 'c', 'value': 10},
          {'category': 'd', 'value': 3},
          {'category': 'e', 'value': 7},
          {'category': 'f', 'value': 8}
        ]
      },
      'encoding': {
        'theta': {'field': 'value', 'type': 'quantitative', 'stack': true},
        'color': {'field': 'category', 'type': 'nominal', 'legend': null}
      },
      'layer': [{
        'mark': {'type': 'arc', 'outerRadius': 80}
      }, {
        'mark': {'type': 'text', 'radius': 90},
        'encoding': {
          'text': {'field': 'value', 'type': 'quantitative'}
        }
      }],
      'view': {'stroke': null}
    };

    setChartExample(visualizationSpecPie, '#chart-2');

    const visualizationSpecDonut = {
      '$schema': 'https://vega.github.io/schema/vega-lite/v5.json',
      'data': {
        'values': [
          {'category': 'a', 'value': 4},
          {'category': 'b', 'value': 6},
          {'category': 'c', 'value': 10},
          {'category': 'd', 'value': 3},
          {'category': 'e', 'value': 7},
          {'category': 'f', 'value': 8}
        ]
      },
      'encoding': {
        'theta': {'field': 'value', 'type': 'quantitative', 'stack': true},
        'color': {'field': 'category', 'type': 'nominal', 'legend': null}
      },
      'layer': [
        {
          'mark': {'type': 'arc', 'outerRadius': 80, 'innerRadius': 20}
        },
        {
          'mark': {'type': 'arc', 'innerRadius': 20, 'stroke': '#fff'}
        },
        {
          'mark': {'type': 'text', 'radius': 110},
          'encoding': {
            'text': {'field': 'value', 'type': 'quantitative'}
          }
        }
      ]
    };

    setChartExample(visualizationSpecDonut, '#chart-3');

    const visualizationSpecColumnStacked = {
      '$schema': 'https://vega.github.io/schema/vega-lite/v5.json',
      'data': {'url': 'https://vega.github.io/editor/data/seattle-weather.csv'},
      'mark': 'bar',
      'encoding': {
        'x': {'timeUnit': 'month', 'field': 'date', 'type': 'ordinal'},
        'y': {'aggregate': 'count'},
        'tooltip': {'aggregate': 'count', 'type': 'quantitative'},
        'color': {'field': 'weather'}

      }
    };

    setChartExample(visualizationSpecColumnStacked, '#chart-4');

    const visualizationSpecColumnLayered = {
      '$schema': 'https://vega.github.io/schema/vega-lite/v5.json',
      'data': {'url': 'https://vega.github.io/editor/data/seattle-weather.csv'},
      'mark': 'bar',
      'encoding': {
        'x': {'timeUnit': 'month', 'field': 'date', 'type': 'ordinal'},
        'y': {'aggregate': 'count', 'stack': null},
        'tooltip': {'aggregate': 'count', 'type': 'quantitative'},
        'color': {'field': 'weather'}

      }
    };

    setChartExample(visualizationSpecColumnLayered, '#chart-5');

    const visualizationSpecColumn = {
      '$schema': 'https://vega.github.io/schema/vega-lite/v5.json',
      'data': {'url': 'https://vega.github.io/editor/data/seattle-weather.csv'},
      'mark': 'bar',
      'encoding': {
        'x': {'timeUnit': 'month', 'field': 'date', 'type': 'ordinal'},
        'y': {'aggregate': 'count'},
        'tooltip': {'aggregate': 'count', 'type': 'quantitative'}

      }
    };

    setChartExample(visualizationSpecColumn, '#chart-6');

    const visualizationSpecLineAllPoints = {
      '$schema': 'https://vega.github.io/schema/vega-lite/v5.json',
      'data': {'url': 'https://vega.github.io/editor/data/seattle-weather.csv'},
      'width': 360,
      'height': 360,
      'mark': {
        'type': 'line',
        'interpolate': 'monotone'
      },
      'encoding': {
        'x': {'field': 'date', 'type': 'temporal'},
        'y': {'field': 'temp_max', 'type': 'quantitative'},
        'tooltip': {'field': 'temp_max', 'type': 'quantitative'}
      }
    };

    setChartExample(visualizationSpecLineAllPoints, '#chart-7');

    /** Spark column examples **/

    const visualizationSpecSparkColumn = {
      $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
      data: {'values': [
          {'category': 'a', 'value': 4},
          {'category': 'b', 'value': 6},
          {'category': 'c', 'value': 10},
          {'category': 'd', 'value': 3},
          {'category': 'e', 'value': 10},
          {'category': 'f', 'value': 20}
        ]
      },

      width: 'container',

      config: {
        font: 'Noto Sans',
        autosize: 'fit',
        axis: {
          ticks: false,
          titlePadding: 8,
          titleFontSize: '12',
          titleFontWeight: '700',
          labelColor: '#1B2C48',
          labelFontWeight: '400',
          labelFontSize: '12',
          labelPadding: '8',
          domainColor:'#A3A7B0',
          gridColor: '#F2F2F3'
        },
        axisX: {
          labelAngle: 0

        },
        scale: {
          bandPaddingInner: 0.4, // padding between columns / bars
          bandPaddingOuter: 0.4 // padding between leftmost/rightmost column/bar from axes
        },
        legend: {
          symbolType: 'circle'
        },
        bar: {
          color: '#0D7482',
        }
      },
      layer: [
        { data: { values: [{}] },

        mark: {
            type: 'rule',
            color: '#FE8F85',
            strokeDash: [4, 2],
            size: 2
        },

        encoding: {
            y: {
                datum: 4
            }
        }
      },
      {
        mark: { type: 'bar', tooltip: true, stroke: '#7B88F7' },
        params: [
          { name: 'hover', select: { type: 'point', on: 'pointerover'}},
          { name: 'select', select: 'point'}
        ],
        encoding: {
          x: { field: 'category', type: 'nominal' },
          y: { field: 'value', type: 'quantitative' },
          fillOpacity: {
            condition: { param: 'hover', value: 1},
            value: 0.25
          },
          strokeWidth: {
            condition: [
            {
              param: 'select',
              empty: false,
              value: 2
            },
          ],
            value: 0
          }
        }
      }
    ]
  };

  setChartExample(visualizationSpecSparkColumn, '#spark-column');

    const visualizationSpecSparkMultiColumn = {
      $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
      data: {'values': [
          {'category': 'a', 'group': '1', 'value': 4},
          {'category': 'a', 'group': '2', 'value': 7},
          {'category': 'a', 'group': '3', 'value': 2},
          {'category': 'b', 'group': '1', 'value': 6},
          {'category': 'b', 'group': '2', 'value': 3},
          {'category': 'b', 'group': '3', 'value': 2},
          {'category': 'c', 'group': '1', 'value': 10},
          {'category': 'c', 'group': '2', 'value': 4},
          {'category': 'c', 'group': '3', 'value': 1},
          {'category': 'd', 'group': '1', 'value': 3},
          {'category': 'd', 'group': '2', 'value': 1},
          {'category': 'd', 'group': '3', 'value': 9},
          {'category': 'e', 'group': '1', 'value': 10},
          {'category': 'e', 'group': '2', 'value': 9},
          {'category': 'e', 'group': '3', 'value': 8}
        ]
      },
      params: [
        { name: 'hover', select: { type: 'point', on: 'pointerover'}},
        { name: 'select', select: 'point'},
        {
          name: 'legendHover',
          select: {type: 'point', on: 'pointerover', fields: ['group']},
          bind: { legend: 'mouseover'}
        }
      ],
      width: 'container',
      mark: { type: 'bar', tooltip: true, stroke: '#7B88F7' },
      // general properties that apply to the entire chart
      config: {
        font: 'Noto Sans',
        autosize: 'fit',
        axis: {
          ticks: false,
          titlePadding: 8,
          titleFontSize: '12',
          titleFontWeight: '700',
          labelColor: '#1B2C48',
          labelFontWeight: '400',
          labelFontSize: '12',
          labelPadding: '8',
          domainColor:'#A3A7B0',
          gridColor: '#F2F2F3'
        },
        axisX: {
          labelAngle: 0
        },
        legend: {
          symbolType: 'circle'
        },
        bar: {
          width: { band: .7 } // decrease width of bars so that there is space between grouped bars
        },
        scale: {
          bandPaddingInner: 0.4, // padding between columns / bars
          bandPaddingOuter: 0.4 // padding between leftmost/rightmost column/bar from axes
        },
      },
      encoding: {
        x: { field: 'category', type: 'nominal' },
        y: { field: 'value', type: 'quantitative' },
        xOffset: { field: 'group' },
        color: {
          field: 'group',
          scale: {range: ['#0D7482', '#5798D9', '#CDACFF']},
        },
        fillOpacity: {
          condition: { param: 'legendHover', value: 1},
          value: 0.25
        },
        strokeWidth: {
          condition: [
          {
            param: 'select',
            empty: false,
            value: 2
          },
        ],
          value: 0
        }
      }
    };

    setChartExample(visualizationSpecSparkMultiColumn, '#spark-multi-column');

    const visualizationSpecSparkColumnStacked = {
      $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
      data: {'url': 'https://vega.github.io/editor/data/seattle-weather.csv'},
      config: {
        font: 'Noto Sans',
        autosize: 'fit',
        axis: {
          ticks: false,
          titlePadding: 8,
          titleFontSize: '12',
          titleFontWeight: '700',
          labelColor: '#1B2C48',
          labelFontWeight: '400',
          labelFontSize: '12',
          labelPadding: '8',
          domainColor:'#A3A7B0',
          gridColor: '#F2F2F3'
        },
        legend: {
          symbolType: 'circle'
        },
        scale: {
          bandPaddingInner: 0.4, // padding between columns / bars
          bandPaddingOuter: 0.4 // padding between leftmost/rightmost column/bar from axes
        },
      },
      mark: 'bar',

      encoding: {
        x: { timeUnit: 'month', field: 'date', type: 'ordinal'},
        y: {aggregate: 'count'},
        tooltip: {aggregate: 'count', type: 'quantitative'},
        color: {field: 'weather' , scale: {range: ['#0D7482', '#5798D9', '#CDACFF', '#89387B', '#FF5C77']},}
      }
    };

    setChartExample(visualizationSpecSparkColumnStacked, '#spark-stacked-column');

    /** Spark bar examples **/

    const visualizationSpecSparkBar = {
      $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
      data: {'values': [
          {'category': 'a', 'value': 4},
          {'category': 'b', 'value': 6},
          {'category': 'c', 'value': 10},
          {'category': 'd', 'value': 3},
          {'category': 'e', 'value': 10},
          {'category': 'f', 'value': 20}
        ]
      },

      width: 'container',

      config: {
        font: 'Noto Sans',
        autosize: 'fit',
        axis: {
          ticks: false,
          titlePadding: 8,
          titleFontSize: '12',
          titleFontWeight: '700',
          labelColor: '#1B2C48',
          labelFontWeight: '400',
          labelFontSize: '12',
          labelPadding: '8',
          domainColor:'#A3A7B0',
          gridColor: '#F2F2F3'
        },
        axisX: {
          labelAngle: 0

        },
        scale: {
          bandPaddingInner: 0.4, // padding between columns / bars
          bandPaddingOuter: 0.4 // padding between leftmost/rightmost column/bar from axes
        },
        legend: {
          symbolType: 'circle'
        },
        bar: {
          color: '#0D7482',
        }
      },
      layer: [
      {
        mark: { type: 'bar', tooltip: true, stroke: '#7B88F7' },
        params: [
          { name: 'hover', select: { type: 'point', on: 'pointerover'}},
          { name: 'select', select: 'point'}
        ],
        encoding: {
          y: { field: 'category', type: 'nominal' },
         x: { field: 'value', type: 'quantitative' },
          fillOpacity: {
            condition: { param: 'hover', value: 1},
            value: 0.25
          },
          strokeWidth: {
            condition: [
            {
              param: 'select',
              empty: false,
              value: 2
            },
          ],
            value: 0
          }
        }
      }
    ]
  };

   setChartExample(visualizationSpecSparkBar, '#spark-bar');

   const visualizationSpecSparkMultiBar = {
      $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
      data: {'values': [
          {'category': 'a', 'group': '1', 'value': 4},
          {'category': 'a', 'group': '2', 'value': 7},
          {'category': 'a', 'group': '3', 'value': 2},
          {'category': 'b', 'group': '1', 'value': 6},
          {'category': 'b', 'group': '2', 'value': 3},
          {'category': 'b', 'group': '3', 'value': 2},
          {'category': 'c', 'group': '1', 'value': 10},
          {'category': 'c', 'group': '2', 'value': 4},
          {'category': 'c', 'group': '3', 'value': 1},
          {'category': 'd', 'group': '1', 'value': 3},
          {'category': 'd', 'group': '2', 'value': 1},
          {'category': 'd', 'group': '3', 'value': 9},
          {'category': 'e', 'group': '1', 'value': 10},
          {'category': 'e', 'group': '2', 'value': 9},
          {'category': 'e', 'group': '3', 'value': 8}
        ]
      },
      params: [
        { name: 'hover', select: { type: 'point', on: 'pointerover'}},
        { name: 'select', select: 'point'},
        {
          name: 'legendHover',
          select: {type: 'point', on: 'pointerover', fields: ['group']},
          bind: { legend: 'mouseover'}
        }
      ],
      width: 'container',
      mark: { type: 'bar', tooltip: true, stroke: '#7B88F7' },
      // general properties that apply to the entire chart
      config: {
        font: 'Noto Sans',
        autosize: 'fit',
        axis: {
          ticks: false,
          titlePadding: 8,
          titleFontSize: '12',
          titleFontWeight: '700',
          labelColor: '#1B2C48',
          labelFontWeight: '400',
          labelFontSize: '12',
          labelPadding: '8',
          domainColor:'#A3A7B0',
          gridColor: '#F2F2F3'
        },
        axisX: {
          labelAngle: 0
        },
        legend: {
          symbolType: 'circle'
        },
        bar: {
          height: { band: .7 } // decrease height of bars so that there is space between grouped bars
        },
        scale: {
          bandPaddingInner: 0.4, // padding between columns / bars
          bandPaddingOuter: 0.4 // padding between leftmost/rightmost column/bar from axes
        },
      },
      encoding: {
        y: { field: 'category', type: 'nominal' },
        x: { field: 'value', type: 'quantitative' },
        yOffset: { field: 'group' },
        color: {
          field: 'group',
          scale: {range: ['#0D7482', '#5798D9', '#CDACFF']},
        },
        fillOpacity: {
          condition: { param: 'legendHover', value: 1},
          value: 0.25
        },
        strokeWidth: {
          condition: [
          {
            param: 'select',
            empty: false,
            value: 2
          },
        ],
          value: 0
        }
      }
    };

    setChartExample(visualizationSpecSparkMultiBar, '#spark-multi-bar');

  })()"
>
  .not-used {
    -custom-noop: noop;
  }

  .gux-chart-container {
    width: 100%;
  }
</style>
